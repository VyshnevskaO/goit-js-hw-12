{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\n\nexport function createMarkup(arr) {\n return arr\n        .map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => `<li class=\"gallery-item\">\n\t<a class=\"gallery-link\" href=\"${largeImageURL}\">\n\t\t<img \n\t\t\tclass=\"gallery-image\" \n\t\t\tsrc=\"${webformatURL}\"\n\t\t\talt=\"${tags}\"\n\t\t\twidth=\"360px\"\n            height=\"152px\" />\n\t</a>\n    <ul class=\"image-text\"> \n    <li class=\"value\">Likes<p class=\"amount\">${likes}</p></li>\n    <li class=\"value\">Views<p class=\"amount\">${views}</p></li>\n    <li class=\"value\">Comments<p class=\"amount\">${comments}</p></li>\n    <li class=\"value\">Downloads<p class=\"amount\">${downloads}</p></li>\n    </ul>\n   </li>`)\n     .join(\"\");\n    \n}\n\n\n\n","import axios from \"axios\";\n\nexport async function fetchRequest(request, page) {\n    const BASE_URL = 'https://pixabay.com';\n    const END_POINT = '/api/';\n    const API_KEY = '43347579-3d95162bcb8db799a52fc5fc5';\n\n  const response = await axios.get(`${BASE_URL}${END_POINT}`, {\n       params: {\n        key: API_KEY,\n        q: request,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page,\n        per_page: 15\n        }\n  })\n    return response.data;\n\n}","import 'normalize.css';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { createMarkup } from './js/render-functions';\nimport { fetchRequest } from './js/pixabay-api';\n\n\nconst simpleLightbox = new SimpleLightbox('.gallery a',\n    {\n        captionsData: \"alt\",\n        captionPosition: \"bottom\",\n        captionDelay: 250,\n    });\n\n\nconst form = document.querySelector(\"form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\"#animation\");\nconst loadMore = document.querySelector(\".load-btn\");\nlet page = 1; \nlet request = null;\nlet lastPage;\n\n\nform.addEventListener(\"submit\", handleSubmit);\nloadMore.addEventListener(\"click\", handleClick);\n\n\nasync function handleSubmit(event) {\n    \n    event.preventDefault();\n    loadMore.classList.add(\"hidden\");\n    loader.classList.toggle(\"loader\");\n    gallery.innerHTML = \"\";\n    page = 1;\n\n    request = event.target.elements.text.value.trim();\n    if (!request) {\n        loader.classList.toggle(\"loader\");\n        return\n    }\n    try {\n        const response = await fetchRequest(request)\n   \n        \n             if (response.hits.length === 0) {\n                iziToast.error({ message: 'Sorry, there are no images matching your search query. Please try again!'});\n                \n            } else {\n                \n                gallery.innerHTML = createMarkup(response.hits);\n                 simpleLightbox.refresh();\n         \n                lastPage = Math.ceil((response.totalHits) / 15);\n                if ( lastPage > 1) {\n                loadMore.classList.remove(\"hidden\");\n            }\n                \n             }\n            \n        \n    } catch (error) {\n        console.log(error);\n\n    } finally {\n        loader.classList.toggle(\"loader\");\n        form.reset();\n    }\n }\n\n\nasync function handleClick() {\n    \n    loader.classList.toggle(\"loader\");\n\n\n    page += 1;\n\n    try {\n\n        const response = await fetchRequest(request, page);\n        gallery.insertAdjacentHTML('beforeend', createMarkup(response.hits));\n        simpleLightbox.refresh();\n\n        const { height: cardHeight } = document\n            .querySelector('.gallery')\n            .firstElementChild.getBoundingClientRect();\n\n\n        window.scrollBy({\n        top: cardHeight *2 ,\n        left: 0,\n        behavior: \"smooth\",\n        });\n\n        \n        if (lastPage === page) {\n            loadMore.classList.add(\"hidden\");\n             iziToast.info({ message: 'We are sorry, but you have reached the end of search results'});\n          \n        }\n        \n\n    } catch (error) {\n         console.log(error);\n    } finally {\n        loader.classList.toggle(\"loader\");\n    }\n }"],"names":["createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","fetchRequest","request","page","BASE_URL","END_POINT","API_KEY","axios","simpleLightbox","SimpleLightbox","form","gallery","loader","loadMore","lastPage","handleSubmit","handleClick","event","response","iziToast","error","cardHeight"],"mappings":"owBAEO,SAASA,EAAaC,EAAK,CACjC,OAAOA,EACC,IAAI,CAAC,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAAM;AAAA,iCACzDL,CAAa;AAAA;AAAA;AAAA,UAGpCD,CAAY;AAAA,UACZE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,+CAKiCC,CAAK;AAAA,+CACLC,CAAK;AAAA,kDACFC,CAAQ;AAAA,mDACPC,CAAS;AAAA;AAAA,SAEnD,EACH,KAAK,EAAE,CAEb,CCpBO,eAAeC,EAAaC,EAASC,EAAM,CAC9C,MAAMC,EAAW,sBACXC,EAAY,QACZC,EAAU,qCAahB,OAXe,MAAMC,EAAM,IAAI,GAAGH,CAAQ,GAAGC,CAAS,GAAI,CACvD,OAAQ,CACP,IAAKC,EACL,EAAGJ,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAU,EACT,CACT,CAAG,GACiB,IAEpB,CCXA,MAAMK,EAAiB,IAAIC,EAAe,aACtC,CACI,aAAc,MACd,gBAAiB,SACjB,aAAc,GACtB,CAAK,EAGCC,EAAO,SAAS,cAAc,MAAM,EACpCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,YAAY,EAC5CC,EAAW,SAAS,cAAc,WAAW,EACnD,IAAIV,EAAO,EACPD,EAAU,KACVY,EAGJJ,EAAK,iBAAiB,SAAUK,CAAY,EAC5CF,EAAS,iBAAiB,QAASG,CAAW,EAG9C,eAAeD,EAAaE,EAAO,CAS/B,GAPAA,EAAM,eAAc,EACpBJ,EAAS,UAAU,IAAI,QAAQ,EAC/BD,EAAO,UAAU,OAAO,QAAQ,EAChCD,EAAQ,UAAY,GACpBR,EAAO,EAEPD,EAAUe,EAAM,OAAO,SAAS,KAAK,MAAM,OACvC,CAACf,EAAS,CACVU,EAAO,UAAU,OAAO,QAAQ,EAChC,MACH,CACD,GAAI,CACA,MAAMM,EAAW,MAAMjB,EAAaC,CAAO,EAGlCgB,EAAS,KAAK,SAAW,EAC1BC,EAAS,MAAM,CAAE,QAAS,0EAA0E,CAAC,GAIrGR,EAAQ,UAAYnB,EAAa0B,EAAS,IAAI,EAC7CV,EAAe,QAAO,EAEvBM,EAAW,KAAK,KAAMI,EAAS,UAAa,EAAE,EACzCJ,EAAW,GAChBD,EAAS,UAAU,OAAO,QAAQ,EAM7C,OAAQO,EAAO,CACZ,QAAQ,IAAIA,CAAK,CAEzB,QAAc,CACNR,EAAO,UAAU,OAAO,QAAQ,EAChCF,EAAK,MAAK,CACb,CACH,CAGF,eAAeM,GAAc,CAEzBJ,EAAO,UAAU,OAAO,QAAQ,EAGhCT,GAAQ,EAER,GAAI,CAEA,MAAMe,EAAW,MAAMjB,EAAaC,EAASC,CAAI,EACjDQ,EAAQ,mBAAmB,YAAanB,EAAa0B,EAAS,IAAI,CAAC,EACnEV,EAAe,QAAO,EAEtB,KAAM,CAAE,OAAQa,CAAU,EAAK,SAC1B,cAAc,UAAU,EACxB,kBAAkB,sBAAqB,EAG5C,OAAO,SAAS,CAChB,IAAKA,EAAY,EACjB,KAAM,EACN,SAAU,QAClB,CAAS,EAGGP,IAAaX,IACbU,EAAS,UAAU,IAAI,QAAQ,EAC9BM,EAAS,KAAK,CAAE,QAAS,8DAA8D,CAAC,EAKhG,OAAQC,EAAO,CACX,QAAQ,IAAIA,CAAK,CAC1B,QAAc,CACNR,EAAO,UAAU,OAAO,QAAQ,CACnC,CACL"}